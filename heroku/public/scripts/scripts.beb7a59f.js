"use strict";angular.module("rowSignsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("newSign",{url:"/sign/new/",templateUrl:"views/newsign.html",controller:"NewsignCtrl"}).state("editSign",{url:"/sign/edit/{projectId:int}",templateUrl:"views/editsign.html",controller:"EditsignCtrl"}).state("signList",{url:"/signs",templateUrl:"views/signlist.html",controller:"SignlistCtrl"}).state("signDetail",{url:"/sign/{projectId:int}",templateUrl:"views/signdetail.html",controller:"SigndetailCtrl"}).state("reports",{url:"/reports",templateUrl:"views/reports.html",controller:"ReportsCtrl"})}]),angular.module("rowSignsApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("rowSignsApp").controller("NewsignCtrl",["$scope","$location","geoTools",function(a,b,c){a.inspectionData={inspector:"loggedInUser",images:[]},a.save=function(){console.log(a.inspectionData)},a["delete"]=function(b){var c=a.inspectionData.images.indexOf(b);a.inspectionData.images.splice(c,1)},document.getElementById("picture").onchange=function(){var b=null,c=document.getElementById("picture").files[0],d=document.createElement("img"),e=new FileReader;e.onload=function(c){d.src=c.target.result,d.onload=function(){var c=document.createElement("canvas"),e=c.getContext("2d");e.drawImage(d,0,0);var f=800,g=600,h=d.width,i=d.height;h>i?h>f&&(i*=f/h,h=f):i>g&&(h*=g/i,i=g),c.width=h,c.height=i;var e=c.getContext("2d");e.drawImage(d,0,0,h,i),b=c.toDataURL("image/jpeg"),a.$apply(function(){a.inspectionData.images.push(b)})}},e.readAsDataURL(c)};var d=function(){var b={overviewMapControl:!0,rotateControl:!0,scaleControl:!0,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER},zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT}},d=new google.maps.Map(document.getElementById("map-canvas"),b),e=new google.maps.LatLngBounds(new google.maps.LatLng(37.921971,-84.663139),new google.maps.LatLng(38.155595,-84.334923));d.fitBounds(e);var f=new google.maps.Marker({map:d,draggable:!0});google.maps.event.addListener(f,"dragend",function(b){c.councilDistrict(b.latLng.lat(),b.latLng.lng()).then(function(b){b.data.success===!0&&(a.inspectionData.councilDistrict=b.data.district)}),c.nearestStreet(b.latLng.lat(),b.latLng.lng()).then(function(c){c.data.success===!0&&(a.inspectionData.number=c.data.from+"-"+c.data.to,a.inspectionData.street=c.data.street,a.inspectionData.sclink=c.data.sclink,a.inspectionData.lat=b.latLng.lat(),a.inspectionData.lng=b.latLng.lng())})}),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){var e={lat:b.coords.latitude,lng:b.coords.longitude};c.councilDistrict(e.lat,e.lng).then(function(b){b.data.success===!0&&(a.inspectionData.councilDistrict=b.data.district)}),c.nearestStreet(e.lat,e.lng).then(function(b){b.data.success===!0&&(a.inspectionData.number=b.data.from+"-"+b.data.to,a.inspectionData.street=b.data.street,a.inspectionData.sclink=b.data.sclink,a.inspectionData.lat=e.lat,a.inspectionData.lng=e.lng)}),f.setPosition(e),d.setCenter(e),d.setZoom(18)},function(){handleLocationError(!0,f,d.getCenter())}):handleLocationError(!1,f,d.getCenter())};d()}]),angular.module("rowSignsApp").controller("EditsignCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("rowSignsApp").controller("SignlistCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("rowSignsApp").controller("SigndetailCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("rowSignsApp").controller("ReportsCtrl",function(){console.log("Reports"),this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("rowSignsApp").factory("geoTools",["$http",function(a){return{streetAddress:function(b,c){return a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+b+","+c+"&result_type=street_address&key=AIzaSyDXqhUx3ZQwPBtAVsXg6tz9N_2yvrRydcQ")},councilDistrict:function(b,c){return a.get("http://localhost:3000/api/v1/council-district/"+b+"/"+c)},nearestStreet:function(b,c){return a.get("http://localhost:3000/api/v1/nearest-street/"+b+"/"+c)}}}]),angular.module("rowSignsApp").run(["$templateCache",function(a){a.put("views/editsign.html","<p>This is the editSign view.</p>"),a.put("views/main.html",'<div cass="row"> <div class="col-md-4"> <div class="btn btn-lg btn-primary btn-fill" ui-sref="newSign">Add Inspection</div> </div> <div class="col-md-4"> <div class="btn btn-lg btn-primary btn-fill" ui-sref="signList">Browse Inspections</div> </div> <div class="col-md-4"> <div class="btn btn-lg btn-primary btn-fill" ui-sref="reports">Run Reports</div> </div> </div>'),a.put("views/newsign.html",'<h1>Sign Inspection</h1> <form> <div class="form-group"> <label>Date</label> <input type="date" name="date" id="date" ng-model="inspectionData.date" class="form-control" required> </div> <div class="form-group"> <label>Time</label> <input type="time" name="time" id="time" ng-model="inspectionData.time" class="form-control" required> </div> <div class="form-group"> <label>Sign Location</label> <div id="map-canvas"></div> </div> <div class="row"> <div class="form-group col-md-4"> <input type="text" ng-hide="true" ng-model="inspectionData.lat" required> <label>Number</label> <input type="text" id="address" name="address" class="form-control" ng-model="inspectionData.number" readonly> </div> <div class="form-group col-md-4"> <label>Street</label> <input type="text" id="address" name="address" class="form-control" ng-model="inspectionData.street" readonly> </div> <div class="form-group col-md-4"> <label>Council District</label> <input type="text" id="address" name="address" class="form-control" ng-model="inspectionData.councilDistrict" readonly> </div> </div> <div class="form-group"> <label>Photos</label> <br> <label for="picture" class="btn-image"> <i class="fa fa-camera" aria-hidden="true"></i> Upload Photo </label> <input name="picture" id="picture" type="file" accept="image/*" required> </div> <div ng-repeat="x in inspectionData.images"> <img src="{{x}}" class="preview"><button class="btn btn-danger" ng-click="delete(x)">Delete</button> </div> <input class="" name="photoValidation" ng-model="inspectionData.images[0]" ng-hide="true"> <div class="form-group"> <label>Name on Sign</label> <input type="text" id="name" name="name" placeholder="eg. Jonathan\'s Diner" class="form-control" ng-model="inspectionData.name"> </div> <div class="form-group"> <label>Phone on Sign</label> <input type="text" name="phone" id="phone" placeholder="eg. 859-258-3430" class="form-control" ng-model="inspectionData.phone"> </div> <div class="form-group"> <label>Website on Sign</label> <input type="text" name="URL" id="URL" placeholder="eg. www.jonathansdiner.com" class="form-control" ng-model="inspectionData.website"> </div> <div class="form-group"> <label>Email on Sign</label> <input type="text" name="email" id="email" placeholder="eg. info@jonathansdiner.com" class="form-control" ng-model="inspectionData.email"> </div> <div class="form-group"> <label>Notes</label> <textarea name="notes" id="notes" placeholder="" class="form-control" ng-model="inspectionData.notes"></textarea> </div> <button id="submit" class="btn btn-lg btn-success btn-fill" ng-click="save()">Submit</button> </form>'),a.put("views/reports.html","<h1>Reports</h1> <p>Coming soon...</p>"),a.put("views/signdetail.html",'<h1 class="text-primary bold">232 Taylor Dr</h1> <button class="btn btn-default">Edit Inspection</button> <button class="btn btn-default">Create Report</button> <div class="row"> <div class="col-md-6"> <h3>Inspection Information</h3> <ul> <li><span class="bold">Inspector:</span></li> <li><span class="bold">Date:</span></li> <li><span class="bold">Name:</span></li> <li><span class="bold">Phone:</span></li> <li><span class="bold">Email:</span></li> <li><span class="bold">Website:</span></li> <li><span class="bold">Notes:</span></li> </ul> </div> <div class="col-md-6"> <h3>Inspection Location</h3> <p>MAP</p> </div> </div> <div class="row"> <div class="col-md-12"> <h3>Photos</h3> </div> </div> <div class="row"> <div class="col-md-12"> <h3>History</h3> </div> </div>'),a.put("views/signlist.html",'<h1>Inspections</h1> <div class="row"> <form> <div class="form-group col-sm-10"> <input class="form-control" placeholder="Search" type="text"> </div> <div class="form-group col-sm-2"> <button class="btn btn-success btn-fill">Search</button> </div> </form> </div> <div class="col-md-12 row-header"> <div class="col-md-2 data">Address</div> <div class="col-md-2 data">Date</div> <div class="col-md-2 data">Name</div> <div class="col-md-2 data">Phones</div> <div class="col-md-2 data">Email</div> <div class="col-md-2 data">Website</div> </div> <div class="col-md-12 row-data"> <div class="col-md-2 data bold-title">232 Taylor Dr</div> <div class="col-md-2 data">12/31/2015</div> <div class="col-md-2 data">BigLots</div> <div class="col-md-2 data">8592314523</div> <div class="col-md-2 data">jmholl5@gmail.com</div> <div class="col-md-2 data">www.jonathan.com</div> </div>')}]);